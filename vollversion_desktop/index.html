<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>redOS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Mobile Device Message -->
  <div class="mobile-message" id="mobileMessage">
    <h1>Nicht unterst√ºtzt</h1>
    <p>Diese Anwendung ist f√ºr die Verwendung auf Desktop-Computern optimiert. Bitte √∂ffnen Sie die Seite auf einem Computer oder Laptop.</p>
    <p class="muted">(Device not supported - Please use a desktop computer)</p>
  </div>

  <div class="startup-overlay" id="startupOverlay">
    <div class="startup-container">
      <div class="startup-logo">üéÆ</div>
      <div class="startup-title">redOS (in beta hat noch viele fehler)</div>
      <div class="startup-subtitle">Wird gestartet‚Ä¶</div>
      <div class="startup-progress">
        <div class="startup-progress-bar" id="startupProgressBar"></div>
      </div>
      <button class="bios-btn" id="biosBtn" title="BIOS - Systemeinstellungen">BIOS</button>
    </div>
  </div>

  <!-- BIOS Interface -->
  <div class="bios-overlay" id="biosOverlay" style="display: none;">
    <div class="bios-window">
      <div class="bios-header">
        <div class="bios-title">redOS BIOS Setup Utility</div>
        <button class="bios-close" id="biosClose">‚úï</button>
      </div>
      <div class="bios-content">
        <div class="bios-sidebar">
          <div class="bios-menu-item active" data-section="system">System Information</div>
          <div class="bios-menu-item" data-section="boot">Boot Options</div>
          <div class="bios-menu-item" data-section="performance">Performance</div>
          <div class="bios-menu-item" data-section="security">Security</div>
          <div class="bios-menu-item" data-section="power">Power Management</div>
          <div class="bios-menu-item" data-section="recovery">File Recovery</div>
          <div class="bios-menu-item" data-section="editor">System Code Editor</div>
          <div class="bios-menu-item" data-section="storage">Storage & Memory</div>
          <div class="bios-menu-item" data-section="reset">System Reset</div>
        </div>
        <div class="bios-main">
          <!-- System Information Section -->
          <div class="bios-section active" id="section-system">
            <h3>System Information</h3>
            <div class="bios-grid">
              <div class="bios-grid-item">
                <label>BIOS Version:</label>
                <span id="bios-version">RedOS BIOS v1.0.0</span>
              </div>
              <div class="bios-grid-item">
                <label>Build Date:</label>
                <span id="bios-date">2025-12-31</span>
              </div>
              <div class="bios-grid-item">
                <label>CPU Model:</label>
                <span id="cpu-model">WebCore Virtual CPU</span>
              </div>
              <div class="bios-grid-item">
                <label>CPU Speed:</label>
                <span id="cpu-speed">3.2 GHz</span>
              </div>
              <div class="bios-grid-item">
                <label>Memory:</label>
                <span id="memory-total">8 GB</span>
              </div>
              <div class="bios-grid-item">
                <label>Available Storage:</label>
                <span id="storage-available">Loading...</span>
              </div>
              <div class="bios-grid-item">
                <label>System Time:</label>
                <span id="system-time">--:--:--</span>
              </div>
              <div class="bios-grid-item">
                <label>System Date:</label>
                <span id="system-date">--/--/----</span>
              </div>
            </div>
            <div class="bios-info">
              <p><strong>OS:</strong> redOS Beta</p>
              <p><strong>Storage:</strong> <span id="storageSize">0</span> KB</p>
              <p><strong>Files:</strong> <span id="fileCount">0</span></p>
              <p><strong>Desktop Items:</strong> <span id="desktopCount">0</span></p>
              <p><strong>Status:</strong> <span id="systemStatus">OK</span></p>
            </div>
          </div>

          <!-- File Recovery Section -->
          <div class="bios-section" id="section-recovery">
            <h3>Systemdateien Wiederherstellen</h3>
            <div class="bios-info">
              <p>Klicken Sie auf die Schaltfl√§che, um alle fehlenden Systemdateien wiederherzustellen:</p>
              <button id="restoreAllSystemFiles" class="bios-btn" style="margin: 15px 0;">Alle Systemdateien wiederherstellen</button>
              <div id="recovery-status" class="recovery-status"></div>
            </div>
          </div>
          
          <!-- Boot Options Section -->
          <div class="bios-section" id="section-boot">
            <h3>Boot Options</h3>
            <div class="bios-grid">
              <div class="bios-grid-item">
                <label>Boot Mode:</label>
                <select id="boot-mode" class="bios-select">
                  <option value="uefi">UEFI</option>
                  <option value="legacy">Legacy</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Secure Boot:</label>
                <select id="secure-boot" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Fast Boot:</label>
                <select id="fast-boot" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Boot Order:</label>
                <div id="boot-order" class="bios-boot-order">
                  <!-- Boot devices will be populated by JavaScript -->
                </div>
              </div>
            </div>
            <div class="bios-actions">
              <button class="bios-btn" onclick="saveBootSettings()">Save Changes</button>
              <button class="bios-btn" onclick="resetBootSettings()">Reset to Defaults</button>
            </div>
          </div>

          <!-- Performance Section -->
          <div class="bios-section" id="section-performance">
            <h3>Performance Settings</h3>
            <div class="bios-grid">
              <div class="bios-grid-item">
                <label>CPU Power Profile:</label>
                <select id="cpu-profile" class="bios-select">
                  <option value="power-saving">Power Saving</option>
                  <option value="balanced" selected>Balanced</option>
                  <option value="performance">Performance</option>
                  <option value="custom">Custom</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Turbo Boost:</label>
                <select id="turbo-boost" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Memory Profile:</label>
                <select id="memory-profile" class="bios-select">
                  <option value="auto">Auto</option>
                  <option value="xmp1">XMP Profile 1</option>
                  <option value="xmp2">XMP Profile 2</option>
                </select>
              </div>
            </div>
            <div class="bios-actions">
              <button class="bios-btn" onclick="savePerformanceSettings()">Save Changes</button>
              <button class="bios-btn" onclick="resetPerformanceSettings()">Reset to Defaults</button>
            </div>
          </div>

          <!-- Security Section -->
          <div class="bios-section" id="section-security">
            <h3>Security Settings</h3>
            <div class="bios-grid">
              <div class="bios-grid-item">
                <label>Administrator Password:</label>
                <button class="bios-btn" onclick="changeAdminPassword()">Change Password</button>
              </div>
              <div class="bios-grid-item">
                <label>Secure Boot:</label>
                <select id="secure-boot-mode" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>TPM Security:</label>
                <select id="tpm-mode" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Secure Boot Mode:</label>
                <select id="secure-boot-policy" class="bios-select">
                  <option value="standard">Standard</option>
                  <option value="custom">Custom</option>
                </select>
              </div>
            </div>
            <div class="bios-actions">
              <button class="bios-btn" onclick="saveSecuritySettings()">Save Changes</button>
              <button class="bios-btn" onclick="resetSecuritySettings()">Reset to Defaults</button>
            </div>
          </div>

          <!-- Power Management Section -->
          <div class="bios-section" id="section-power">
            <h3>Power Management</h3>
            <div class="bios-grid">
              <div class="bios-grid-item">
                <label>Power Profile:</label>
                <select id="power-profile" class="bios-select">
                  <option value="power-saving">Power Saving</option>
                  <option value="balanced" selected>Balanced</option>
                  <option value="performance">Performance</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Sleep Mode:</label>
                <select id="sleep-mode" class="bios-select">
                  <option value="s3">S3 (Suspend to RAM)</option>
                  <option value="s4">S4 (Hibernate)</option>
                  <option value="s5">S5 (Soft Off)</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>Wake on LAN:</label>
                <select id="wol-mode" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <div class="bios-grid-item">
                <label>USB Power Share:</label>
                <select id="usb-power-share" class="bios-select">
                  <option value="enabled">Enabled</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
            </div>
            <div class="bios-actions">
              <button class="bios-btn" onclick="savePowerSettings()">Save Changes</button>
              <button class="bios-btn" onclick="resetPowerSettings()">Reset to Defaults</button>
            </div>
          </div>

          <!-- File Recovery Section -->
          <div class="bios-section" id="section-recovery">
            <h3>File Recovery</h3>
            <div class="bios-info">
              <p>Hier kannst du gel√∂schte Dateien anschauen und wiederherstellen.</p>
            </div>
            <div class="bios-file-list" id="recoveryFileList">
              <p class="muted">Keine Dateien zum Wiederherstellen</p>
            </div>
          </div>

          <!-- System Code Editor Section -->
          <div class="bios-section" id="section-editor">
            <h3>System Code Editor</h3>
            <div class="bios-info">
              <p>Bearbeite Systemdateien direkt:</p>
            </div>
            <style>
              .bios-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 12px;
                margin: 20px 0;
              }
              
              .bios-grid-item {
                display: flex;
                justify-content: space-between;
                padding: 8px 12px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 4px;
              }
              
              .bios-grid-item label {
                font-weight: 600;
                margin-right: 10px;
              }
              
              .bios-actions {
                display: flex;
                gap: 10px;
                margin: 20px 0 0 0;
                padding: 0;
                width: 100%;
              }
              
              .refresh-container {
                margin: 0;
                padding: 0;
              }
              
              .bios-footer {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                padding: 10px 20px;
                background: rgba(0, 0, 0, 0.8);
                border-top: 1px solid #333;
              }
              
              .footer-content {
                display: flex;
                align-items: center;
                justify-content: space-between;
                max-width: 1200px;
                margin: 0 auto;
              }
              
              .footer-content p {
                margin: 0;
                color: #aaa;
                font-size: 12px;
              }
              
              #refreshStatsBtn {
                margin: 0 !important;
                padding: 8px 16px;
                background: #2c3e50;
                border: 1px solid #3a4f66;
              }
              
              #refreshStatsBtn:hover {
                background: #34495e;
                border-color: #4a90e2;
              }
              
              .bios-section {
                display: none;
              }
              
              .bios-section.active {
                display: block;
              }
              
              .bios-menu-item {
                padding: 10px 15px;
                cursor: pointer;
                border-left: 3px solid transparent;
                transition: all 0.2s;
              }
              
              .bios-menu-item:hover {
                background: rgba(255, 255, 255, 0.1);
              }
              
              .bios-menu-item.active {
                background: rgba(0, 100, 255, 0.2);
                border-left: 3px solid #4a90e2;
              }
              
              .bios-btn {
                background: #2c3e50;
                border: 1px solid #3a4f66;
                color: #ecf0f1;
                padding: 8px 16px;
                border-radius: 4px;
                cursor: pointer;
                transition: all 0.2s;
              }
              
              .bios-btn:hover {
                background: #34495e;
                border-color: #4a90e2;
              }
              
              .bios-btn:active {
                transform: translateY(1px);
              }
            </style>
            <select id="systemFileSelect" class="bios-select">
              <option value="">-- W√§hle eine Systemdatei --</option>
            </select>
            <textarea id="codeEditor" class="bios-textarea" placeholder="Systemdatei Inhalt..."></textarea>
            <button class="bios-action-btn" id="savecodeBtn">Save Changes</button>
            <button class="bios-action-btn ghost" id="reloadCodeBtn">Reload Original</button>
          </div>

          <!-- Storage & Memory Section -->
          <div class="bios-section" id="section-storage">
            <h3>Storage & Memory</h3>
            <div class="bios-info">
              <div id="storageDetails"></div>
            </div>
            <button class="bios-action-btn" id="clearCacheBtn">Clear Cache</button>
            <button class="bios-action-btn" id="clearCookiesBtn">Clear Cookies</button>
            <button class="bios-action-btn" id="compactStorageBtn">Compact Storage</button>
          </div>

          <!-- System Reset Section -->
          <div class="bios-section" id="section-reset">
            <h3>System Reset</h3>
            <div class="bios-info">
              <p style="color: #ff3f30; font-weight: bold;">‚ö†Ô∏è Warnung: Diese Aktion kann nicht r√ºckg√§ngig gemacht werden!</p>
              <p>W√§hle eine Resetoption:</p>
            </div>
            <button class="bios-action-btn" id="softResetBtn">Soft Reset (Dateien behalten)</button>
            <button class="bios-action-btn danger" id="hardResetBtn">Hard Reset (Alles l√∂schen)</button>
          </div>
        </div>
      </div>
      <div class="bios-footer">
        <div class="footer-content">
          <button class="bios-btn" id="refreshStatsBtn" onclick="refreshSystemInfo()">Refresh Stats</button>
          <p>Press ESC to exit BIOS | √Ñnderungen werden automatisch gespeichert</p>
        </div>
      </div>
    </div>
  </div>

  <style>
    .bios-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #000000;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 20px;
      overflow: auto;
    }
  </style>

  <div class="redos-dialog-overlay hidden" id="redosDialogOverlay">
    <div class="redos-dialog glass" role="dialog" aria-modal="true" aria-labelledby="redosDialogTitle">
      <div class="redos-dialog-header">
        <div class="redos-dialog-title" id="redosDialogTitle">redOS</div>
      </div>
      <div class="redos-dialog-body">
        <div class="redos-dialog-message" id="redosDialogMessage"></div>
        <input class="setup-input redos-dialog-input hidden" id="redosDialogInput" type="text" autocomplete="off" />
      </div>
      <div class="redos-dialog-actions" id="redosDialogActions"></div>
    </div>
  </div>

  <!-- redOS Men√ºleiste oben -->
  <nav class="menu-bar" id="menuBar">
    <div class="menu-left">
      <div class="redos-logo">üéÆ</div>
      <div class="menu-item menu-redos" id="menuRedOS">redOS</div>
    </div>
    <div class="menu-center">
      <div class="menu-item menu-dropdown" id="menuFile">Datei</div>
      <div class="menu-item menu-dropdown" id="menuEdit">Bearbeiten</div>
      <div class="menu-item menu-dropdown" id="menuView">Ansicht</div>
      <div class="menu-item menu-dropdown" id="menuWindow">Fenster</div>
      <div class="menu-item menu-dropdown" id="menuHelp">Hilfe</div>
    </div>
    <div class="menu-right">
      <div class="menu-item reset-btn" id="resetBtn" title="System zur√ºcksetzen">üîÑ</div>
      <div class="menu-item clock-menu" id="clockMenu"></div>
    </div>
  </nav>

  <!-- Desktop Hintergrund -->
  <div class="desktop-background"></div>
  
  <!-- Desktop Shell -->
  <main class="desktop-shell">
    <div id="windowArea" class="window-area">
      <!-- Desktop-Dateien werden hier dynamisch eingef√ºgt -->
    </div>
  </main>

  <!-- Fenster Template mit Traffic Lights -->
  <template id="windowTemplate">
    <article class="window">
      <header class="window-head">
        <div class="traffic-lights">
          <button class="traffic-light traffic-light-close" title="Schlie√üen">
            <span class="traffic-light-icon"></span>
          </button>
          <button class="traffic-light traffic-light-minimize" title="Minimieren">
            <span class="traffic-light-icon"></span>
          </button>
          <button class="traffic-light traffic-light-maximize" title="Vollbild">
            <span class="traffic-light-icon"></span>
          </button>
        </div>
        <div class="window-title">
          <div class="title-line"></div>
        </div>
        <div class="window-actions">
          <button class="window-refresh" title="Neu laden">‚Üª</button>
        </div>
      </header>
      <div class="window-body">
        <iframe class="app-frame" loading="lazy" sandbox="allow-same-origin allow-scripts allow-forms allow-pointer-lock allow-popups allow-modals allow-popups-to-escape-sandbox" referrerpolicy="no-referrer"></iframe>
      </div>
    </article>
  </template>

  <!-- Hover area for dock -->
  <div class="dock-hover-area"></div>
  
  <!-- Dock unten -->
  <div class="dock" id="dock">
    <div class="dock-container">
      <!-- Apps werden hier eingef√ºgt -->
    </div>
  </div>

  <!-- Setup Overlay -->
  <div class="setup-overlay" id="setupOverlay">
    <div class="setup-container glass">
      <div class="setup-step" id="setupStep1">
        <div class="setup-icon">üéÆ</div>
        <h1 class="setup-title">Willkommen bei redOS</h1>
        <p class="setup-description">Lass uns dein System einrichten</p>
        <button class="setup-btn primary" id="setupBtn1" type="button" onclick="window.setupNextStep && window.setupNextStep()">Weiter</button>
      </div>
      
      <div class="setup-step hidden" id="setupStep2">
        <div class="setup-icon">üîí</div>
        <h1 class="setup-title">Passwort erstellen</h1>
        <p class="setup-description">Erstelle ein sicheres Passwort f√ºr dein System</p>
        <div class="setup-form">
          <input type="password" id="passwordInput" class="setup-input" placeholder="Passwort eingeben" autocomplete="new-password">
          <input type="password" id="passwordConfirm" class="setup-input" placeholder="Passwort best√§tigen" autocomplete="new-password">
          <div class="setup-error" id="passwordError"></div>
        </div>
        <div class="setup-buttons">
          <button class="setup-btn ghost" id="setupBtnBack" type="button" onclick="window.setupPrevStep && window.setupPrevStep()">Zur√ºck</button>
          <button class="setup-btn primary" id="setupBtn2" type="button" onclick="window.setupCreatePassword && window.setupCreatePassword()">Weiter</button>
        </div>
      </div>
      
      <div class="setup-step hidden" id="setupStep3">
        <div class="setup-icon">‚ú®</div>
        <h1 class="setup-title">Fertig!</h1>
        <p class="setup-description">Dein System ist bereit</p>
        <button class="setup-btn primary" id="setupBtn3" type="button" onclick="window.setupComplete && window.setupComplete()">Loslegen</button>
      </div>
    </div>
  </div>

  <div class="tutorial-prompt-overlay hidden" id="tutorialPromptOverlay">
    <div class="tutorial-prompt-container glass">
      <div class="setup-icon">‚ùì</div>
      <h1 class="setup-title">M√∂chtest du eine Erkl√§rung?</h1>
      <p class="setup-description">Ich zeige dir kurz die wichtigsten Funktionen von redOS.</p>
      <div class="setup-buttons">
        <button class="setup-btn ghost" id="tutorialPromptNo" type="button">Nein</button>
        <button class="setup-btn primary" id="tutorialPromptYes" type="button">Ja</button>
      </div>
    </div>
  </div>

  <div class="tutorial-overlay hidden" id="tutorialOverlay">
    <div class="tutorial-container glass">
      <div class="tutorial-header">
        <div class="tutorial-title" id="tutorialTitle">Tutorial</div>
        <button class="setup-btn ghost" id="tutorialClose" type="button">Beenden</button>
      </div>
      <div class="tutorial-body">
        <div class="tutorial-text" id="tutorialText"></div>
        <div class="tutorial-progress" id="tutorialProgress"></div>
      </div>
      <div class="tutorial-actions">
        <button class="setup-btn ghost" id="tutorialPrev" type="button">Zur√ºck</button>
        <button class="setup-btn primary" id="tutorialNext" type="button">Weiter</button>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
  <script src="bios.js"></script>
</body>
</html>
